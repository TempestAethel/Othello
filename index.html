<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Othello Game</title>
    <style>
        body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    background: linear-gradient(to top left, #000000, #111111, #222222),
         linear-gradient(to bottom right, #000000, #111111, #1E8278);
    opacity: 0.8;
    color: white;
    font-family: Arial, sans-serif;
    position: relative;
}

h1 {
    position: absolute; /* Changed to absolute */
    top: 20px; /* Position from the top */
    left: 50%;
    transform: translateX(-50%); /* Center it horizontally */
    margin: 0;
    font-size: 4em; /* Increased size for more prominence */
    text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.8); /* More pronounced shadow */
    letter-spacing: 3px; /* More spacing between letters */
}


        #controls {
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            width: 300px;
            position: absolute; /* Adjusted position to center */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* Centering controls */
        }

        label {
            font-weight: bold;
            font-size: 1.2em;
        }

        select, button {
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            width: 100%;
        }

        select:hover, button:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        #board {
            display: grid;
            border: 2px solid #ffffff;
            margin: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            visibility: hidden;
            transition: visibility 0s, opacity 0.5s linear;
            opacity: 0;
        }

        #board.visible {
            visibility: visible;
            opacity: 1;
        }

        .cell {
            width: 50px;
            height: 50px;
            border: 1px solid #ffffff;
            position: relative;
            cursor: pointer;
            transition: background 0.3s;
        }

        .cell:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .piece {
            position: absolute;
            width: 80%;
            height: 80%;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .black {
            background: black;
        }

        .white {
            background: white;
        }

        #status {
            margin-top: 20px;
            visibility: hidden;
        }

        #reset {
            display: none;
            margin: 10px auto;
            padding: 10px;
            border-radius: 5px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 16px;
            transition: background 0.3s, transform 0.2s, opacity 0.3s;
            opacity: 0.8;
            width: 150px;
        }

        #reset:hover {
            background: rgba(255, 255, 255, 0.3);
            opacity: 1;
        }

        #infoButton {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            width: auto; /* Changed to auto for proper sizing */
        }

        #infoButton:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        #rules {
            display: none;
            position: absolute;
            top: 60px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 5px;
            color: white;
            width: 200px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <h1>Othello</h1>
    <div id="controls">
        <label for="mode">Game Mode:</label>
        <select id="mode">
            <option value="2player">Two Players</option>
            <option value="easyAI">Easy AI</option>
            <option value="hardAI">Hard AI</option>
        </select>
   
        <label for="size">Board Size:</label>
        <select id="size">
            <option value="4">4x4</option>
            <option value="5">5x5</option>
            <option value="6">6x6</option>
            <option value="7">7x7</option>
            <option value="8" selected>8x8</option>
            <option value="9">9x9</option>
            <option value="10">10x10</option>
            <option value="11">11x11</option>
            <option value="12">12x12</option>
        </select>
  
        <button id="start">Start Game</button>
     </div>
    <div id="board" class="visible"></div>
    <button id="reset">Reset Game</button>
    <div id="status"></div>
    
    <button id="infoButton">Info</button>
    <div id="rules">
        <h3>Othello Rules</h3>
        <p>1. Players take turns placing pieces on the board.</p>
        <p>2. A piece must outflank one or more of the opponent's pieces.</p>
        <p>3. All outflanked pieces are flipped to the current player's color.</p>
        <p>4. The game ends when neither player can make a move.</p>
        <p>5. The player with the most pieces on the board wins.</p>
    </div>

    <script>
        const boardElement = document.getElementById('board');
        const statusElement = document.getElementById('status');
        const modeSelect = document.getElementById('mode');
        const sizeSelect = document.getElementById('size');
        const startButton = document.getElementById('start');
        const resetButton = document.getElementById('reset');
        const infoButton = document.getElementById('infoButton');
        const rulesElement = document.getElementById('rules');

        let boardSize = 8;
        let board = [];
        let currentPlayer = 'black';
        let gameMode = '2player';
        let scores = { black: 2, white: 2 };
        let gameEnded = false;

        function initializeBoard() {
            board = Array.from({ length: boardSize }, () => Array(boardSize).fill(null));
            const mid = Math.floor(boardSize / 2);
            board[mid - 1][mid - 1] = 'white';
            board[mid][mid] = 'white';
            board[mid - 1][mid] = 'black';
            board[mid][mid - 1] = 'black';
            renderBoard();
            gameEnded = false;
            boardElement.classList.add('visible');
            statusElement.style.visibility = 'hidden'; 
            resetButton.style.display = 'block'; 
        }

        function renderBoard() {
            boardElement.innerHTML = '';
            boardElement.style.gridTemplateColumns = `repeat(${boardSize}, 50px)`;
            boardElement.style.gridTemplateRows = `repeat(${boardSize}, 50px)`;

            for (let row = 0; row < boardSize; row++) {
                for (let col = 0; col < boardSize; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;

                    if (board[row][col]) {
                        const piece = document.createElement('div');
                        piece.className = `piece ${board[row][col]}`;
                        cell.appendChild(piece);
                    }

                    cell.addEventListener('click', () => handleCellClick(row, col));
                    boardElement.appendChild(cell);
                }
            }
            updateStatus();
        }

        function handleCellClick(row, col) {
            if (!gameEnded && validMove(row, col)) {
                placePiece(row, col);
                if (gameMode.includes('AI') && currentPlayer === 'white') {
                    setTimeout(() => {
                        if (gameMode === 'easyAI') easyAIMove();
                        else hardAIMove();
                    }, 500);
                }
            }
        }

        function validMove(row, col) {
            if (board[row][col] !== null) return false;

            const directions = [
                { x: 0, y: -1 }, { x: 0, y: 1 }, { x: -1, y: 0 },
                { x: 1, y: 0 }, { x: -1, y: -1 }, { x: -1, y: 1 },
                { x: 1, y: -1 }, { x: 1, y: 1 }
            ];
            for (let { x, y } of directions) {
                let r = row + y;
                let c = col + x;
                let foundOpponent = false;

                while (r >= 0 && r < boardSize && c >= 0 && c < boardSize) {
                    if (board[r][c] === null) break;
                    if (board[r][c] === currentPlayer) {
                        if (foundOpponent) return true;
                        break;
                    }
                    foundOpponent = true;
                    r += y;
                    c += x;
                }
            }
            return false;
        }

        function placePiece(row, col) {
            board[row][col] = currentPlayer;
            flipPieces(row, col);
            updateScores();
            if (checkGameOver()) {
                gameEnded = true;
                setTimeout(() => {
                    const winner = scores.black > scores.white ? 'Black' : scores.white > scores.black ? 'White' : 'It\'s a tie!';
                    alert(`Game Over! Winner: ${winner}. Final Score - Black: ${scores.black}, White: ${scores.white}`);
                    resetGame();
                }, 100);
                return;
            }
            currentPlayer = currentPlayer === 'black' ? 'white' : 'black';
            renderBoard();
        }

        function flipPieces(row, col) {
            const directions = [
                { x: 0, y: -1 }, { x: 0, y: 1 }, { x: -1, y: 0 },
                { x: 1, y: 0 }, { x: -1, y: -1 }, { x: -1, y: 1 },
                { x: 1, y: -1 }, { x: 1, y: 1 }
            ];

            for (let { x, y } of directions) {
                let r = row + y;
                let c = col + x;
                const piecesToFlip = [];

                while (r >= 0 && r < boardSize && c >= 0 && c < boardSize) {
                    if (board[r][c] === null) break;
                    if (board[r][c] === currentPlayer) {
                        for (let piece of piecesToFlip) {
                            board[piece.r][piece.c] = currentPlayer;
                        }
                        break;
                    }
                    piecesToFlip.push({ r, c });
                    r += y;
                    c += x;
                }
            }
        }

        function updateScores() {
            scores.black = 0;
            scores.white = 0;
            for (let row of board) {
                for (let cell of row) {
                    if (cell === 'black') scores.black++;
                    if (cell === 'white') scores.white++;
                }
            }
            updateStatus();
        }

        function updateStatus() {
            statusElement.innerHTML = `<strong>Black:</strong> ${scores.black} <strong>White:</strong> ${scores.white} <br> <strong>${currentPlayer.charAt(0).toUpperCase() + currentPlayer.slice(1)}'s turn.</strong>`;
            statusElement.style.visibility = 'visible';
        }

        function easyAIMove() {
            const validMoves = getValidMoves();
            if (validMoves.length) {
                const move = validMoves[Math.floor(Math.random() * validMoves.length)];
                placePiece(move.row, move.col);
            }
        }

        function hardAIMove() {
            const validMoves = getValidMoves();
            if (validMoves.length) {
                let bestMove = validMoves[0];
                let bestScore = -1;
                for (let move of validMoves) {
                    const tempBoard = board.map(row => row.slice());
                    tempBoard[move.row][move.col] = 'white';
                    const score = evaluateBoard(tempBoard);
                    if (score > bestScore) {
                        bestScore = score;
                        bestMove = move;
                    }
                }
                placePiece(bestMove.row, bestMove.col);
            }
        }

        function getValidMoves() {
            const moves = [];
            for (let row = 0; row < boardSize; row++) {
                for (let col = 0; col < boardSize; col++) {
                    if (validMove(row, col)) {
                        moves.push({ row, col });
                    }
                }
            }
            return moves;
        }

        function evaluateBoard(tempBoard) {
            let score = 0;
            for (let row of tempBoard) {
                for (let cell of row) {
                    if (cell === 'white') score++;
                    else if (cell === 'black') score--;
                }
            }
            return score;
        }

        function checkGameOver() {
            const validMoves = getValidMoves();
            if (validMoves.length === 0) {
                currentPlayer = currentPlayer === 'black' ? 'white' : 'black';
                return getValidMoves().length === 0;
            }
            return false;
        }

        function startGame() {
            boardSize = parseInt(sizeSelect.value);
            gameMode = modeSelect.value;
            initializeBoard();
            document.getElementById('controls').style.display = 'none';  
        }

        function resetGame() {
            boardElement.classList.remove('visible');
            document.getElementById('controls').style.display = 'block';  
            resetButton.style.display = 'none';  
            statusElement.style.visibility = 'hidden';  
            scores = { black: 2, white: 2 }; 
            currentPlayer = 'black'; 
            gameEnded = false; 
        }

        function toggleRules() {
            if (rulesElement.style.display === 'none' || rulesElement.style.display === '') {
                rulesElement.style.display = 'block';
            } else {
                rulesElement.style.display = 'none';
            }
        }

        // Event listeners
        startButton.addEventListener('click', startGame);
        resetButton.addEventListener('click', resetGame);
        infoButton.addEventListener('click', toggleRules);

        // Initialize the game (hide the board initially)
        resetGame();
    </script>
</body>
</html>
